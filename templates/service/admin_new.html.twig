{% extends 'admin-base.html.twig' %}

{% block title %}Nouveau Service - Administration{% endblock %}

{% block body %}
    <!-- PAGE HEADER -->
    <div class="page-header">
        <div class="row align-items-end">
            <div class="col-lg-8">
                <div class="page-header-title">
                    <i class="ik ik-file-text bg-blue"></i>
                    <div class="d-inline">
                        <h5>Services</h5>
                        <span>Ajouter une nouvelle prestation de service.</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <nav class="breadcrumb-container" aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="{{ path('admin') }}"><i class="ik ik-home"></i></a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="{{ path('service_admin') }}">Services</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="javascript:void(0);">New</a>
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <!-- /PAGE HEADER -->
    <div class="mt-5 pt-5">
        {{ include('service/_form.html.twig') }}
    </div>
    <a class="btn btn-info" href="{{ path('service_admin') }}">Retour</a>
    <script>
        const fileLinks = ['service_icone', 'service_image'];
        fileLinks.forEach(data => {
            const indexImage = document.getElementById(data).querySelectorAll('input').length;
            document.getElementById(data).innerHTML = document.getElementById(data)
                .getAttribute('data-prototype')
                .replace(/__name__label__/g, "")
                .replace(/__name__/g, ''+ indexImage +'');
        });
    </script>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script>
        {#$(document).ready(function(){#}
        {#    $("#document").on("click", function(){#}
        {#        $.ajax({#}
        {#            url: "{{ path('service_new')}}",#}
        {#            type: 'GET',#}
        {#            success: function (data) {#}
        {#                $(".modal-body").html(data.view);#}
        {#                for (let i = 0; i < document.getElementsByClassName('ajaxFile').length ; i++){#}
        {#                    document.getElementsByClassName('ajaxFile')[i].addEventListener('click', () => {#}
        {#                        console.log(document.getElementsByClassName('ajaxFile')[i].textContent)#}
        {#                    });#}
        {#                }#}
        {#            },#}
        {#            error : function() {#}
        {#                alert('Un probl√®me est survenu lors du chargement des fichiers.');#}
        {#            }#}
        {#        });#}
        {#    });#}
        {#});#}

    </script>
{% endblock %}

