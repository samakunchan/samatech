{% extends 'admin-base.html.twig' %}

{% block title %}Edit Portfolio{% endblock %}

{% block body %}
    <!-- PAGE HEADER -->
    <div class="page-header">
        <div class="row align-items-end">
            <div class="col-lg-8">
                <div class="page-header-title">
                    <i class="ik ik-file-text bg-blue"></i>
                    <div class="d-inline">
                        <h5>Portfolio</h5>
                        <span>Modification d'un portfolio.</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <nav class="breadcrumb-container" aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="{{ path('admin') }}"><i class="ik ik-home"></i></a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="{{ path('service_admin') }}">Portfolio</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="javascript:void(0);">Modifier</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="javascript:void(0);">{{ portfolio.slug | slice(0, 12)}}...</a>
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <!-- /PAGE HEADER -->


    <div class="col-lg-10 col-md-10">
        <div class="card service-title">
            <div class="card-header">
                <h3>Ajouter</h3>
            </div>
            <div class="card-body">
                {{ form_start(form) }}
                <div class="card-body row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            {{ form_errors(form.title) }}
                            {{ form_label(form.title, 'Titre') }}
                            {{ form_widget(form.title, { 'attr': {'class': 'form-control'} }) }}
                        </div>
                        <div class="form-group">
                            {{ form_errors(form.description) }}
                            {{ form_label(form.title, 'Description') }}
                            {{ form_widget(form.description, { 'attr': {'class': 'form-control html-editor', 'rows': 10} }) }}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            {{ form_errors(form.category) }}
                            {{ form_label(form.category, 'Cat√©gorie') }}
                            {{ form_widget(form.category, { 'attr': {'class': 'form-control'} }) }}
                        </div>
                        <div class="form-group">
                            {{ form_errors(form.tags) }}
                            {{ form_label(form.tags, 'Tags') }}
                            {{ form_widget(form.tags, { 'attr': {'class': 'form-control'} }) }}
                        </div>
                        <div class="form-group edit-portfolio">
                            {{ form_errors(form.image) }}
                            {{ form_label(form.image, 'Image') }}
                            {{ form_widget(form.image, { 'attr': {'class': 'form-control'} }) }}
                        </div>
                        <div class="form-group">
                            {% for document in form.image %}
                                <div class="previous-img-{{ loop.index -1 }}">
                                    <img src="{{ asset('uploads/images/' ~ document.vars.data.completeUrl) }}" alt="Image" width="150">
                                    {{ form_errors(document) }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <button class="btn">{{ button_label|default('Update ') }}</button>
                {{ form_end(form) }}
            </div>
        </div>
    </div>

    <a href="{{ path('portfolio_index') }}">back to list</a>

    {{ include('portfolio/_delete_form.html.twig') }}
    <script>
        document.querySelector('.edit-portfolio').textContent = '';
        const div = document.createElement('div');
        div.classList.add(`previous-portfolio-0`);
        const input = document.createElement('input');
        input.type = 'file';
        input.id = `portfolio_image_0`;
        input.classList.add('form-control');
        input.name = `portfolio[image][0][file]`;
        div.appendChild(input);
        div.appendChild(input);
        document.querySelector('.edit-portfolio').appendChild(div);
    </script>
{% endblock %}
